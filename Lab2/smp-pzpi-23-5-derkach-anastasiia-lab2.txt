МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ




Кафедра «Програмна інженерія»




ЗВІТ
з лабораторної роботи №2
з дисципліни «Скриптові мови програмування»





Виконала:									Перевірив:
ст. гр. ПЗПІ-23-5								ст. викл. каф. ПІ
Деркач Анастасія								Сокорчук І. П.




Харків 2025
ЛАБОРАТОРНА РОБОТА №2
	2.1 ІСТОРІЯ ЗМІН
№	Дата	Версія звіту	Опис змін та виправлень
1	11.04.2025	1.0	Створено основні розділи
2	04.06.2025	1.1	Додано розділ ІСТОРІЯ ЗМІН та посилання на відеоролик

	2.2 ЗАВДАННЯ

Потрібно створити консольний застосунок «Продовольчий магазин "Весна"». Програма після запуску повинна вивести на термінал перелік можливих дій. Далі програма очікує введення значення з клавіатури. 
Щоб розпочати купувати товари, необхідно ввести число «1», після чого користувач повинен потрапити в режим закупівлі товарів. На екрані має з’явитися перелік продуктів. Щоб купити товар, необхідно ввести його номер. Після успішної перевірки на існування номера товару в списку, програма має попросити ввести кількість товару.
Якщо номер товару і його кількість (менше 100 шт.) були вказані коректно, то товар додається в кошик. Якщо вказано кількість «0», то товар видаляється з кошика. Далі знову відображається перелік товарів і пропонується купити наступний товар. Щоб завершити купувати товари і перейти до попереднього меню, необхідно ввести з клавіатури цифру «0».
Щоб отримати підсумковий рахунок, потрібно ввести число «2».
Щоб встановити свій профіль потрібно, ввести число «3», після чого програма попросить ввести ваше ім'я та ваш вік. Щоб завершити роботу та вийти з програми, потрібно ввести число «0». У програмі потрібно перевіряти інформацію, яку вводить користувач.


	2.3 ОПИС ВИКОНАННЯ РОБОТИ

	Програма реалізована мовою PHP і запускається в терміналі. Вона імітує роботу невеликого магазину, дозволяючи користувачу вибирати товари, налаштовувати профіль та отримувати підсумковий рахунок.
	На початку було створено масив $products з товарами: кожен товар має назву та ціну. Також оголошено порожній кошик $cart та профіль користувача $user.
	Створено меню для взаємодії з користувачем: showMainMenuHeader() — заголовок магазину,  showMainMenu() — головне меню з командами, input() — функція для читання введення користувача.
	Функція handleBuy() дозволяє вибрати товар, вказати кількість або видалити товар. Всі обрані позиції зберігаються у $cart. Також створена функція showCart() — вона виводить поточні позиції у кошику.
	Якщо вибрано команду 2, програма виводить таблицю з підсумковим рахунком користувача. Для вирівнювання колонок використовується власна функція My_strlen() — вона рахує довжину рядка з підтримкою UTF-8.
	Команда 3 дозволяє користувачеві ввести ім’я та вік. Вік перевіряється на коректність.
	Код програми наведений у додатку Б.

	2.4 ВИСНОВКИ

	У ході виконання роботи було створено консольну програму мовою PHP, яка моделює роботу невеликого магазину. Реалізовано вибір товарів, редагування кошика, формування рахунку та налаштування профілю користувача. Задля правильного форматування українських текстів без використання додаткових розширень була створена власна функція підрахунку довжини рядка. Програму налаштовано як виконуваний файл, що дозволяє запускати її напряму з терміналу. Завдання сприяло кращому розумінню роботи з масивами, циклами та введенням даних у середовищі командного рядка.
 
ДОДАТОК А
Відеозапис

Відеозапис презентації результатів виконаної лабораторної роботи:  https://youtu.be/YMqf2ruLjxo

Хронологічний опис відеозапису:
00:00 - Вступ 
00:15 - Поясненя по коду 
17:15 - Запуск програми


 
ДОДАТОК Б
Програмний код

GitHub репозиторій: https://github.com/NureDerkachAnastasiia/smp-pzpi-23-5-derkach-anastasiia/blob/main/Lab1/smp-pzpi-23-5-derkach-anastasiia-lab1/smp-pzpi-23-5-derkach-anastasiia-lab2-code
  1 <?php
  2
  3 $MIN_QUANTITY = 0;
  4 $MAX_QUANTITY = 100;
  5 $MIN_AGE = 7;
  6 $MAX_AGE = 150;
  7
  8 $json = file_get_contents("products.json");
  9 $products = json_decode($json, true);
 10
 11 function showMainMenuHeader() {
 12     echo "################################\n";
 13     echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
 14     echo "################################\n";
 15 }
 16
 17 function showMainMenu(){
 18     echo "1 Вибрати товари\n";
 19     echo "2 Отримати підсумковий рахунок\n";
 20     echo "3 Налаштувати свій профіль\n";
 21     echo "0 Вийти з програми\n";
 22 }
 23 function input($prompt){
 24     echo $prompt;
 25     return trim(fgets(STDIN));
 26 }
 27 function showProducts($products) {
 28     echo "№  НАЗВА                 ЦІНА\n";
 29     foreach ($products as $num => $item) {
 30         echo "{$num}  {$item['name']}";
 31         $spaces = 22 - My_strlen($item['name']);
 32         for ($f = 0; $f < $spaces; $f++) {
 33             echo " ";
 34         }
 35         echo $item['price'] . "\n";
 36     }
 37     echo "   -----------\n";
 38     echo "0  ПОВЕРНУТИСЯ\n";
 39 }
 40 function showCart($cart, $products) {
 41     if(empty($cart)) {
 42         echo "КОШИК ПОРОЖНІЙ\n";
 43         return;
 44     }
 45     echo "У КОШИКУ:\n";
 46     echo "НАЗВА                 КІЛЬКІСТЬ\n";
 47     foreach ($cart as $id => $qty) {
 48         echo $products[$id]["name"];
 49         $spaces = 22 - My_strlen($products[$id]["name"]);
 50         for ($f = 0; $f < $spaces; $f++) {
 51             echo " ";
 52         }
 53         echo $qty . "\n";
 54     }
 55 }
 56 function handleBuy(&$cart, $products){
 57     global $MIN_QUANTITY, $MAX_QUANTITY;
 58     while(true) {
 59         showProducts( $products);
 60         $choice = input("Виберіть товар: ");
 61         if(!is_numeric($choice)) {
 62             echo "ПОМИЛКА! Вкажіть число\n";
 63             continue;
 64         }
 65         $choice = (int) $choice;
 66         if($choice === 0) {
 67             break;
 68         }
 69         if(!array_key_exists($choice, $products)){
 70             echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ\n";
 71             continue;
 72         }
 73         echo "Вибрано: {$products[$choice]['name']}\n";
 74         echo "Введіть кількість штук: ";
 75         $qty = trim(fgets(STDIN));
 76         if(!is_numeric($qty)) {
 77             echo "ПОМИЛКА! Введіть число\n";
 78             continue;
 79         }
 80         $qty = (int) $qty;
 81         if($qty < $MIN_QUANTITY || $qty > $MAX_QUANTITY) {
 82             echo "ПОМИЛКА! Кількість повинна бути більше {$MIN_QUANTITY} і менше {$MAX_QUANTITY}\n";
 83             continue;
 84         }
 85         if($qty === 0){
 86             echo "ВИДАЛЯЮ ТОВАР З КОШИКА\n";
 87             unset($cart[$choice]);
 88         } else {
 89             $cart[$choice] = $qty;
 90         }
 91         showCart($cart, $products);
 92     }
 93 }
 94 function My_strlen($str)
 95 {
 96     $len = strlen($str);
 97     $count = 0;
 98     for ($i = 0; $i < $len; $i++) {
 99         $char = ord($str[$i]);
100         if ($char <= 127) {
101             $count++;
102         } elseif ($char >> 5 == 0b110) {
103             $i += 1;
104             $count++;
105         } elseif ($char >> 4 == 0b1110) {
106             $i += 2;
107             $count++;
108         } elseif ($char >> 3 == 0b11110) {
109             $i += 3;
110             $count++;
111         } else {
112             continue;
113         }
114     }
115     return $count;
116 }
117 showMainMenuHeader();
118 while(true){
119     showMainMenu();
120     $cmd = input("Введіть команду: ");
121     switch($cmd){
122     case "1":
123             handleBuy($cart, $products);
124             break;
125     case "2":
126             if(empty($cart)){
127                 echo "КОШИК ПОРОЖНІЙ\n";
128             } else {
129                 echo "№  НАЗВА                 ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ\n";
130                 $i = 1;
131                 $total = 0;
132                 foreach ($cart as $id => $qty) {
133                     $name = $products[$id]["name"];
134                     $price = $products[$id]["price"];
135                     $lineTotal = $price * $qty;
136                     $total += $lineTotal;
137                     echo $i . "  ";
138                     echo $name;
139                     $spaces = 22 - My_strlen($name);
140                     for ($f = 0; $f < $spaces; $f++) {
141                         echo " ";
142                     }
143                     echo $price . "    ";
144                     if(strlen((string)$price) == 1){
145                         echo " ";
146                     }
147                     echo $qty . "         ";
148                     if(strlen((string)$qty) == 1){
149                         echo " ";
150                     }
151                     echo $lineTotal . "\n";
152                     $i++;
153                 }
154                 echo "РАЗОМ ДО CПЛАТИ: $total\n";
155             }
156             break;
157     case "3":
158             while(true){
159                 $name = input("Введіть ім'я: ");
160                 if(strlen($name) < 1){
161                     echo "ПОМИЛКА! Ім'я повинно містити хоча б одну літеру\n";
162                     continue;
163                 }
164                 break;
165             }
166             while(true){
167                 $age = input("Введіть вік: ");
168                 if(!is_numeric($age) || $age < 7 || $age > 150){
169                     echo "ПОМИЛКА! Вік повинен бути від {$MIN_AGE} до {$MAX_AGE} років\n";
170                     continue;
171                 }
172                 $age = (int)$age;
173                 break;
174             }
175             $user["name"] = $name;
176             $user["age"] = $age;
177
178             echo "\n";
179             echo "Ваше ім'я: {$name}\n";
180             echo "Ваш вік: {$age}\n";
181             echo "\n";
182             break;
183     case "0":
184             echo "Ви обрали: Вийти з програми\n";
185             exit;
186     default:
187             echo "ПОМИЛКА! Введіть правильну команду\n";
188     }
189 }
190 ?>

